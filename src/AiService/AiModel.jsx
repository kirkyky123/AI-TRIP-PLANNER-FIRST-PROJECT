import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "text/plain",
};

export const chatSession = model.startChat({
  generationConfig,
  // safetySettings: Adjust safety settings
  // See https://ai.google.dev/gemini-api/docs/safety-settings
  history: [
    {
      role: "user",
      parts: [
        {text: "Generate a detailed travel itinerary for a 3-day trip to Pokhara, Nepal for a Couple on a Premium budget. Include the following elements in JSON format: Hotel Options: (give at least 4 hotel options) HotelName: The name of the hotel. HotelAddress: The full address of the hotel. Price: The nightly cost of staying at the hotel (in a range of what it normally costs per night at the hotel. Ex output: $200-300 per night). HotelImageUrl: A URL to an image of the hotel. GeoCoordinates: The latitude and longitude of the hotel. Rating: The hotel’s rating out of 5. Description: A brief description of the hotel, including amenities, proximity to key attractions, and any special features.  ItineraryDetails for Each Day (Day 1, Day 2, Day 3, etc also ensure that the itinerary is for the full day (so in order from day to night) and then make sure there is at least 5 things each day. Also make sure to pick events for the itinerary depending on the budget. If its a cheap budget pick cheap but good options and if its a more expensive budget, pick expensive things): Day: The specific day of the itinerary. PlacesToVisit: A list of places to visit each day. (Make sure the itinerary is not vague, for example don’t include arrival and leaving of the hotel and make sure every place is specific (with location). So don’t say “relaxing spa treatment” and say the address of it to be “Your Hotel Spa or Recommended Spa”. So, include specific names for each of the places) PlaceName: The name of the place to visit. PlaceNameSearch: This is almost the same as PlaceName but give me JUST the exact name of  the place so don’t include “Dinner at (Place Name) or Lunch at (Place Name) or Evening at (Place Name). I will only use this to use it for my backend to search for this exact location so including other things besides JUST the name is useless for PlaceNameSearch. PlaceDetails: A description of the place, including what it’s known for, activities available, and any special considerations. Make sure the description is NO MORE than 3 sentences while keeping it appealing and concise. PlaceImageUrl: A URL to an image of the place. PlaceAddress: The full address of the place. GeoCoordinates: The latitude and longitude of the place. TicketPricing: The cost of entry or any associated fees. (DO NOT say “depends on order or location” in any way. DO NOT be vague. Give a range if you need to and then add (depends on order for example if there is a restaurant, do not say “depends on order”, instead include the average range of price for a meal at that restaurant and then say depends on order like so “$10-15 (depends on order)” and if its not a place to eat, do not say “depends on order” say something else that makes sense, for example at a spa place, you would say something like “$50-100 (depends on service)” Rating: The place’s rating out of 5. BestTimeToVisit: The exact time to visit the place (e.g., 10:00 AM, 2:30 PM) based on crowd levels, weather, or other factors. Also include in this how long someone should stay there for (e.g., if they got to a park at 10:00 AM, they might leave at 11:30 AM so the output will be like: 10:00 AM - 11:30 AM) and ensure that all times are specific (e.g., 9:00 AM, 2:00 PM) rather than vague (e.g., morning, evening) TravelTime: The estimated travel time from the hotel or previous location to this place in minutes. Make SURE to put this in the format of: (travel time from previous location) so for example if you went to a lake beforehand: (10 mins from the lake) you should use the PlaceNameSearch as the location so like so: (travel time from PlaceNameSearch). Summary Information: Description: A summary description of the whole trip in 3-4 sentences. Make it marketable and appealing. TotalEstimatedCost: An estimate of the total cost of the trip, including hotel, transportation, and entry fees. TravelModes: Suggestions for the best modes of transportation for each day (e.g., walking, public transit, rideshare). Format Requirements: Keep the budget considerations in mind for both the hotel and the itinerary, so if its a cheap budget, make sure to pick affordable options for the hotel and places to visit, if its a medium range budget, make sure to pick medium ranged options for the hotel and places to visit, and if its a premium budget, make sure to pick premium options for the hotel and places to visit. Ensure the itinerary is well-balanced, including a mix of iconic attractions, leisure time, and local experiences. And make sure all fields are filled and DO NOT have “N/A”. For the url fields the max url length is 100, so if the url is any bigger just stop. For the itinerary DO NOT include checking into a hotel as a part of the itinerary. I want you to create things to do without assuming a hotel. So don’t include hotel spas and massages for example. Lastly, if its for a couple, include couple things in the itinerary, if its for a family, include family things in the itinerary, etc. Provide the information in JSON format."},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"HotelOptions\": [\n    {\n      \"HotelName\": \"The Pavilions Himalayan Resort\",\n      \"HotelAddress\": \"Pokhara 33700, Nepal\",\n      \"Price\": \"$250-400 per night\",\n      \"HotelImageUrl\": \"https://www.thepavilions.com/himalayan-resort/images/hero-image-1.jpg\",\n      \"GeoCoordinates\": \"28.2124, 83.9642\",\n      \"Rating\": 4.5,\n      \"Description\": \"This luxurious resort offers stunning views of the Annapurna Himalayas.  It boasts a private beach, an infinity pool, and a world-class spa.  Enjoy excellent service and comfortable accommodations.\"\n    },\n    {\n      \"HotelName\": \"Hotel Barahi\",\n      \"HotelAddress\": \"Barahi Chowk, Pokhara 33700, Nepal\",\n      \"Price\": \"$150-250 per night\",\n      \"HotelImageUrl\": \"https://www.hotelbarahi.com/images/slider/barahi-hotel-pokhara-nepal.jpg\",\n      \"GeoCoordinates\": \"28.2124, 83.9642\",\n      \"Rating\": 4.0,\n      \"Description\": \"Located on Phewa Lake, this classic hotel offers a tranquil setting.  Enjoy beautiful lake views from your room, and indulge in the on-site restaurant and bar.\"\n    },\n    {\n      \"HotelName\": \"Fishtail Lodge\",\n      \"HotelAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n      \"Price\": \"$100-200 per night\",\n      \"HotelImageUrl\": \"https://www.fishtaillodge.com/images/gallery/fishtail-lodge-pokhara.jpg\",\n      \"GeoCoordinates\": \"28.2124, 83.9642\",\n      \"Rating\": 4.0,\n      \"Description\": \"This popular lodge offers a cozy and comfortable stay.  Enjoy scenic views of Phewa Lake and the surrounding mountains.  The lodge provides access to various activities, including boating and hiking.\"\n    },\n    {\n      \"HotelName\": \"Hotel Temple Tree\",\n      \"HotelAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n      \"Price\": \"$80-150 per night\",\n      \"HotelImageUrl\": \"https://www.hoteltempletree.com/images/gallery/hotel-temple-tree-pokhara.jpg\",\n      \"GeoCoordinates\": \"28.2124, 83.9642\",\n      \"Rating\": 3.5,\n      \"Description\": \"This budget-friendly hotel offers a comfortable stay near Phewa Lake.  It features a rooftop terrace with panoramic views, a restaurant, and friendly service.\"\n    }\n  ],\n  \"ItineraryDetails\": [\n    {\n      \"Day\": \"Day 1\",\n      \"PlacesToVisit\": [\n        {\n          \"PlaceName\": \"Morning Yoga at the Lakeside\",\n          \"PlaceNameSearch\": \"Yoga at Lakeside Pokhara\",\n          \"PlaceDetails\": \"Start your day with a rejuvenating yoga session overlooking the serene Phewa Lake. Many studios offer morning classes, perfect for a peaceful and energizing start to your day.\",\n          \"PlaceImageUrl\": \"https://www.yogapokhara.com/images/yoga-pokhara-nepal.jpg\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$5-10\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"7:00 AM - 8:00 AM\",\n          \"TravelTime\": \"(5 mins from hotel)\"\n        },\n        {\n          \"PlaceName\": \"Breakfast at the Old House Restaurant\",\n          \"PlaceNameSearch\": \"Old House Restaurant Pokhara\",\n          \"PlaceDetails\": \"Experience traditional Nepali flavors at this charming restaurant.  Enjoy a delicious breakfast with scenic views of the lake and the Himalayas.\",\n          \"PlaceImageUrl\": \"https://www.tripadvisor.com/Restaurant_Review-g293890-d1187997-Reviews-Old_House_Restaurant-Pokhara_Gandaki_Zone_Western_Region.html\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2128, 83.9631\",\n          \"TicketPricing\": \"$10-15 (depends on order)\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"8:30 AM - 10:00 AM\",\n          \"TravelTime\": \"(10 mins from Yoga at Lakeside Pokhara)\"\n        },\n        {\n          \"PlaceName\": \"Boat Ride on Phewa Lake\",\n          \"PlaceNameSearch\": \"Phewa Lake Boat Ride\",\n          \"PlaceDetails\": \"Embark on a romantic boat ride across Phewa Lake.  Admire the stunning views of the mountains, the iconic Barahi Temple, and the serene surroundings.  Enjoy a leisurely trip with your loved one.\",\n          \"PlaceImageUrl\": \"https://www.pokhara.com/images/phewa-lake.jpg\",\n          \"PlaceAddress\": \"Phewa Lake, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$5-10\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"10:00 AM - 12:00 PM\",\n          \"TravelTime\": \"(15 mins from Old House Restaurant Pokhara)\"\n        },\n        {\n          \"PlaceName\": \"Lunch at the Moondance Restaurant\",\n          \"PlaceNameSearch\": \"Moondance Restaurant Pokhara\",\n          \"PlaceDetails\": \"Indulge in a delicious lunch with breathtaking views at this popular restaurant.  Choose from their diverse menu, savor delicious food, and enjoy the ambiance.\",\n          \"PlaceImageUrl\": \"https://www.moondancerestaurant.com/images/gallery/moondance-restaurant-pokhara.jpg\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$15-25 (depends on order)\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"12:30 PM - 2:00 PM\",\n          \"TravelTime\": \"(10 mins from Phewa Lake Boat Ride)\"\n        },\n        {\n          \"PlaceName\": \"Explore the World Peace Pagoda\",\n          \"PlaceNameSearch\": \"World Peace Pagoda Pokhara\",\n          \"PlaceDetails\": \"Take a scenic hike or a boat ride to this serene pagoda atop a hill.  Enjoy panoramic views of Pokhara and the Himalayas, and experience the peaceful atmosphere.  This is a great spot for reflection and photography.\",\n          \"PlaceImageUrl\": \"https://www.pokhara.com/images/world-peace-pagoda.jpg\",\n          \"PlaceAddress\": \"Annapurna Range, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2303, 83.9591\",\n          \"TicketPricing\": \"$5\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"2:30 PM - 4:30 PM\",\n          \"TravelTime\": \"(30 mins from Moondance Restaurant Pokhara)\"\n        }\n      ]\n    },\n    {\n      \"Day\": \"Day 2\",\n      \"PlacesToVisit\": [\n        {\n          \"PlaceName\": \"Sunrise Hike to Sarangkot\",\n          \"PlaceNameSearch\": \"Sarangkot Viewpoint\",\n          \"PlaceDetails\": \"Embark on a rewarding hike to Sarangkot for a breathtaking sunrise view of the Himalayas.  The panoramic vista is unforgettable, making it a popular destination for photographers and nature enthusiasts.\",\n          \"PlaceImageUrl\": \"https://www.pokhara.com/images/sarangkot-viewpoint.jpg\",\n          \"PlaceAddress\": \"Sarangkot, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2406, 83.9637\",\n          \"TicketPricing\": \"$5-10 (depends on transport)\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"5:30 AM - 7:30 AM\",\n          \"TravelTime\": \"(45 mins from hotel)\"\n        },\n        {\n          \"PlaceName\": \"Breakfast at a Local Cafe in Sarangkot\",\n          \"PlaceNameSearch\": \"Sarangkot Cafe\",\n          \"PlaceDetails\": \"Enjoy a delicious breakfast with mesmerizing mountain views at one of the cafes in Sarangkot.  Savor the local flavors and soak in the serene atmosphere.\",\n          \"PlaceImageUrl\": \"https://www.tripadvisor.com/Restaurant_Review-g293890-d1187997-Reviews-Old_House_Restaurant-Pokhara_Gandaki_Zone_Western_Region.html\",\n          \"PlaceAddress\": \"Sarangkot, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2406, 83.9637\",\n          \"TicketPricing\": \"$10-15 (depends on order)\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"8:00 AM - 9:30 AM\",\n          \"TravelTime\": \"(5 mins from Sarangkot Viewpoint)\"\n        },\n        {\n          \"PlaceName\": \"Visit the International Mountain Museum\",\n          \"PlaceNameSearch\": \"International Mountain Museum Pokhara\",\n          \"PlaceDetails\": \"Immerse yourself in the fascinating world of mountaineering and the Himalayas at this interactive museum.  Explore exhibits showcasing the history, culture, and environment of the region.\",\n          \"PlaceImageUrl\": \"https://www.imm.org.np/images/gallery/gallery-1.jpg\",\n          \"PlaceAddress\": \"Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2185, 83.9551\",\n          \"TicketPricing\": \"$5\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"10:00 AM - 12:00 PM\",\n          \"TravelTime\": \"(30 mins from Sarangkot Cafe)\"\n        },\n        {\n          \"PlaceName\": \"Lunch at the Himalayan Java Cafe\",\n          \"PlaceNameSearch\": \"Himalayan Java Cafe Pokhara\",\n          \"PlaceDetails\": \"Enjoy a delicious and affordable lunch at this popular cafe.  They offer a wide variety of dishes, including Nepali and international cuisine, all with a cozy and inviting atmosphere.\",\n          \"PlaceImageUrl\": \"https://www.himalayanjava.com/images/gallery/himalayan-java-cafe-pokhara.jpg\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$10-15 (depends on order)\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"12:30 PM - 2:00 PM\",\n          \"TravelTime\": \"(15 mins from International Mountain Museum Pokhara)\"\n        },\n        {\n          \"PlaceName\": \"Relaxing Spa Treatment at The Pavilions Himalayan Resort\",\n          \"PlaceNameSearch\": \"The Pavilions Himalayan Resort Spa\",\n          \"PlaceDetails\": \"Indulge in a relaxing couple’s massage or spa treatment at this luxurious resort.  Unwind with a soothing experience and enjoy the serene atmosphere.\",\n          \"PlaceImageUrl\": \"https://www.thepavilions.com/himalayan-resort/images/spa-treatment.jpg\",\n          \"PlaceAddress\": \"Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$50-100 (depends on service)\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"3:00 PM - 5:00 PM\",\n          \"TravelTime\": \"(10 mins from Himalayan Java Cafe Pokhara)\"\n        }\n      ]\n    },\n    {\n      \"Day\": \"Day 3\",\n      \"PlacesToVisit\": [\n        {\n          \"PlaceName\": \"Morning Stroll at the Lakeside\",\n          \"PlaceNameSearch\": \"Lakeside Pokhara\",\n          \"PlaceDetails\": \"Enjoy a leisurely stroll along the bustling Lakeside area, soaking in the vibrant atmosphere.  Browse local shops, admire the colorful buildings, and relish the beautiful lake views.\",\n          \"PlaceImageUrl\": \"https://www.pokhara.com/images/lakeside.jpg\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"N/A\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"9:00 AM - 11:00 AM\",\n          \"TravelTime\": \"(5 mins from hotel)\"\n        },\n        {\n          \"PlaceName\": \"Visit the Gupteshwor Mahadev Cave\",\n          \"PlaceNameSearch\": \"Gupteshwor Mahadev Cave Pokhara\",\n          \"PlaceDetails\": \"Explore the mystical Gupteshwor Mahadev Cave, a sacred Hindu cave temple dedicated to Lord Shiva.  Walk through the narrow passageways, admire the intricate carvings, and experience the spiritual ambiance.\",\n          \"PlaceImageUrl\": \"https://www.pokhara.com/images/gupteshwor-mahadev-cave.jpg\",\n          \"PlaceAddress\": \"Mahendrapool, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2168, 83.9576\",\n          \"TicketPricing\": \"$2\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"11:30 AM - 1:00 PM\",\n          \"TravelTime\": \"(20 mins from Lakeside Pokhara)\"\n        },\n        {\n          \"PlaceName\": \"Lunch at the Cafe de Paris\",\n          \"PlaceNameSearch\": \"Cafe de Paris Pokhara\",\n          \"PlaceDetails\": \"Enjoy a delicious and affordable lunch at this popular cafe.  They offer a wide variety of dishes, including Nepali and international cuisine, all with a cozy and inviting atmosphere.\",\n          \"PlaceImageUrl\": \"https://www.cafedeparis.com/images/gallery/cafe-de-paris-pokhara.jpg\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$10-15 (depends on order)\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"1:30 PM - 3:00 PM\",\n          \"TravelTime\": \"(15 mins from Gupteshwor Mahadev Cave Pokhara)\"\n        },\n        {\n          \"PlaceName\": \"Evening at the Fewa Lake\",\n          \"PlaceNameSearch\": \"Fewa Lake\",\n          \"PlaceDetails\": \"Enjoy a romantic evening by Fewa Lake.  Take a leisurely stroll, watch the sunset, and enjoy the peaceful ambiance.  Consider having dinner at one of the lakeside restaurants with stunning views.\",\n          \"PlaceImageUrl\": \"https://www.pokhara.com/images/fewa-lake.jpg\",\n          \"PlaceAddress\": \"Fewa Lake, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"N/A\",\n          \"Rating\": 4.5,\n          \"BestTimeToVisit\": \"5:30 PM - 7:30 PM\",\n          \"TravelTime\": \"(10 mins from Cafe de Paris Pokhara)\"\n        },\n        {\n          \"PlaceName\": \"Dinner at the Fishtail Lodge Restaurant\",\n          \"PlaceNameSearch\": \"Fishtail Lodge Restaurant Pokhara\",\n          \"PlaceDetails\": \"Indulge in a delicious dinner with stunning lake views at the Fishtail Lodge Restaurant.  Choose from their diverse menu and savor the flavors in a romantic setting.\",\n          \"PlaceImageUrl\": \"https://www.fishtaillodge.com/images/gallery/fishtail-lodge-restaurant-pokhara.jpg\",\n          \"PlaceAddress\": \"Lakeside, Pokhara 33700, Nepal\",\n          \"GeoCoordinates\": \"28.2124, 83.9642\",\n          \"TicketPricing\": \"$15-25 (depends on order)\",\n          \"Rating\": 4.0,\n          \"BestTimeToVisit\": \"7:30 PM - 9:30 PM\",\n          \"TravelTime\": \"(5 mins from Fewa Lake)\"\n        }\n      ]\n    }\n  ],\n  \"SummaryInformation\": {\n    \"Description\": \"Discover the beauty of Pokhara with this premium 3-day itinerary designed for couples.  Explore stunning lakes, hike to scenic viewpoints, indulge in delicious meals, and experience the vibrant culture.  Enjoy breathtaking views of the Himalayas, relax at luxurious resorts, and create lasting memories in this enchanting city.\",\n    \"TotalEstimatedCost\": \"$1000-1500\",\n    \"TravelModes\": \"Walking, taxi, private car, boat\"\n  }\n}\n```"},
      ],
    },
  ],
});
